language ESSENCE' 1.0

find p_PartitionAsSet_ExplicitR2_Occurrence: matrix indexed by [int(1..3), int(1..3)] of bool
such that
    and([or([p_PartitionAsSet_ExplicitR2_Occurrence[q13, 1] /\
             and([p_PartitionAsSet_ExplicitR2_Occurrence[q13, q18] -> 1 = q18 | q18 : int(1..3)]),
             p_PartitionAsSet_ExplicitR2_Occurrence[q13, 2] /\
             and([p_PartitionAsSet_ExplicitR2_Occurrence[q13, q23] -> 2 = q23 | q23 : int(1..3)]),
             p_PartitionAsSet_ExplicitR2_Occurrence[q13, 3] /\
             and([p_PartitionAsSet_ExplicitR2_Occurrence[q13, q28] -> 3 = q28 | q28 : int(1..3)]);
                 int(1..3)])
             | q13 : int(1..3)]),
    or([and([p_PartitionAsSet_ExplicitR2_Occurrence[q35, q36] -> 1 = q36 | q36 : int(1..3)]) /\
        p_PartitionAsSet_ExplicitR2_Occurrence[q35, 1]
            | q35 : int(1..3)]),
    or([and([p_PartitionAsSet_ExplicitR2_Occurrence[q43, q44] -> 2 = q44 | q44 : int(1..3)]) /\
        p_PartitionAsSet_ExplicitR2_Occurrence[q43, 2]
            | q43 : int(1..3)]),
    or([and([p_PartitionAsSet_ExplicitR2_Occurrence[q51, q52] -> 3 = q52 | q52 : int(1..3)]) /\
        p_PartitionAsSet_ExplicitR2_Occurrence[q51, 3]
            | q51 : int(1..3)]),
    alldifferent_except([toInt(p_PartitionAsSet_ExplicitR2_Occurrence[q9, q2]) * catchUndef(q2, 0)
                             | q9 : int(1..3), q2 : int(1..3)],
                        0),
    and([p_PartitionAsSet_ExplicitR2_Occurrence[q4, ..] <lex p_PartitionAsSet_ExplicitR2_Occurrence[q4 + 1, ..]
             | q4 : int(1..2)]),
    and([1 = sum([toInt(p_PartitionAsSet_ExplicitR2_Occurrence[q5, q6]) | q6 : int(1..3)]) | q5 : int(1..3)])

