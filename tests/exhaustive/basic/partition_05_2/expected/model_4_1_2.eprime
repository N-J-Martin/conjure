language ESSENCE' 1.0

find x_PartitionOccurrence_NumParts: int(1..4)
find x_PartitionOccurrence_WhichPart: matrix indexed by [int(1..4)] of int(1..4)
find x_PartitionOccurrence_PartSizes: matrix indexed by [int(1..4)] of int(0..4)
find x_PartitionOccurrence_FirstIndex: matrix indexed by [int(1..4)] of int(1..4)
find x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Marker: int(0..4)
find x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Values_Occurrence: matrix indexed by [int(1..4), int(1..4)] of bool
find x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Marker: int(0..4)
find x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy:
        matrix indexed by [int(1..4), int(1..4)] of int(1..5)
such that
    and([and([q135 <= x_PartitionOccurrence_NumParts,
              or([x_PartitionOccurrence_WhichPart[q141] = q135 /\ q141 = 2 | q141 : int(1..4)]),
              x_PartitionOccurrence_WhichPart[q137] = q135;
                  int(1..3)])
         -> 4 = q137 \/ 2 = q137
             | q135 : int(1..4), q137 : int(1..4)]),
    or([and([q147 <= x_PartitionOccurrence_NumParts,
             or([x_PartitionOccurrence_WhichPart[q151] = q147 /\ q151 = 2 | q151 : int(1..4)]),
             x_PartitionOccurrence_WhichPart[q149] = q147;
                 int(1..3)])
        /\ q149 = 4
            | q147 : int(1..4), q149 : int(1..4)]),
    or([and([q155 <= x_PartitionOccurrence_NumParts,
             or([x_PartitionOccurrence_WhichPart[q159] = q155 /\ q159 = 2 | q159 : int(1..4)]),
             x_PartitionOccurrence_WhichPart[q157] = q155;
                 int(1..3)])
        /\ q157 = 2
            | q155 : int(1..4), q157 : int(1..4)]),
    and([q164 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Marker /\
         x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Values_Occurrence[q164, q162]
         -> or([1 = q162, 2 = q162, 3 = q162, 4 = q162; int(1..4)])
             | q164 : int(1..4), q162 : int(1..4)]),
    or([q173 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Marker /\
        x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Values_Occurrence[q173, q171]
        /\ q171 = 1
            | q173 : int(1..4), q171 : int(1..4)]),
    or([q178 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Marker /\
        x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Values_Occurrence[q178, q176]
        /\ q176 = 2
            | q178 : int(1..4), q176 : int(1..4)]),
    or([q183 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Marker /\
        x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Values_Occurrence[q183, q181]
        /\ q181 = 3
            | q183 : int(1..4), q181 : int(1..4)]),
    or([q188 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Marker /\
        x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Values_Occurrence[q188, q186]
        /\ q186 = 4
            | q188 : int(1..4), q186 : int(1..4)]),
    and([q1 <= x_PartitionOccurrence_NumParts -> x_PartitionOccurrence_PartSizes[q1] <= 4 | q1 : int(1..4)]),
    and([q1 > x_PartitionOccurrence_NumParts -> x_PartitionOccurrence_PartSizes[q1] = 0 | q1 : int(1..4)]),
    x_PartitionOccurrence_NumParts <= 4,
    and([q2 <= x_PartitionOccurrence_NumParts -> or([x_PartitionOccurrence_WhichPart[q3] = q2 | q3 : int(1..4)])
             | q2 : int(3..4)]),
    and([q4 <= x_PartitionOccurrence_NumParts ->
         x_PartitionOccurrence_PartSizes[q4 - 1] = x_PartitionOccurrence_PartSizes[q4]
             | q4 : int(2..4)]),
    x_PartitionOccurrence_NumParts = max([x_PartitionOccurrence_WhichPart[q5] | q5 : int(1..4)]),
    and([x_PartitionOccurrence_PartSizes[q6] = sum([toInt(x_PartitionOccurrence_WhichPart[q7] = q6) | q7 : int(1..4)])
             | q6 : int(1..4)]),
    and([q8 <= x_PartitionOccurrence_NumParts ->
         and([x_PartitionOccurrence_WhichPart[q9] = q8 -> x_PartitionOccurrence_FirstIndex[q8] <= q9 | q9 : int(1..4)])
             | q8 : int(1..4)]),
    and([q8 <= x_PartitionOccurrence_NumParts ->
         or([x_PartitionOccurrence_WhichPart[q9] = q8 /\ x_PartitionOccurrence_FirstIndex[q8] = q9 | q9 : int(1..4)])
             | q8 : int(1..4)]),
    and([q8 > x_PartitionOccurrence_NumParts -> x_PartitionOccurrence_FirstIndex[q8] = 1 | q8 : int(1..4)]),
    and([q10 <= x_PartitionOccurrence_NumParts /\ q11 <= x_PartitionOccurrence_NumParts ->
         (q10 < q11 <-> x_PartitionOccurrence_FirstIndex[q10] < x_PartitionOccurrence_FirstIndex[q11])
             | q10 : int(1..4), q11 : int(1..4)]),
    alldifferent_except([toInt(q114 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Marker /\
                               x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Values_Occurrence[q114, q13])
                         * catchUndef(q13, 0)
                             | q114 : int(1..4), q13 : int(1..4)],
                        0),
    and([q115 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Marker /\
         q116 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Marker
         ->
         sum([toInt(x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Values_Occurrence[q115, q117]) | q117 : int(1..4)]) =
         sum([toInt(x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Values_Occurrence[q116, q118]) | q118 : int(1..4)])
             | q115 : int(1..4), q116 : int(1..4)]),
    and([q119 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Marker ->
         sum([toInt(x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Values_Occurrence[q119, q120]) | q120 : int(1..4)]) >=
         1   | q119 : int(1..4)]),
    and([q17 + 1 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Marker ->
         x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Values_Occurrence[q17, ..] <lex
         x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Values_Occurrence[q17 + 1, ..]
             | q17 : int(1..3)]),
    and([q18 > x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Marker ->
         and([x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Values_Occurrence[q18, q22] = false | q22 : int(1..4)])
             | q18 : int(1..4)]),
    x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Marker <= 4,
    and([q19 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Marker ->
         sum([toInt(x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Values_Occurrence[q19, q20]) | q20 : int(1..4)]) <= 4
             | q19 : int(1..4)]),
    4 =
    sum([toInt(q23 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Marker) *
         catchUndef(sum([toInt(x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Values_Occurrence[q23, q24])
                             | q24 : int(1..4)]),
                    0)
             | q23 : int(1..4)]),
    and([q27 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Marker ->
         or([q29 <= x_PartitionOccurrence_NumParts /\
             (and([x_PartitionOccurrence_WhichPart[q32] = q29 ->
                   x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Values_Occurrence[q27, q32]
                       | q32 : int(1..4)])
              /\
              and([x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Values_Occurrence[q27, q33] ->
                   or([x_PartitionOccurrence_WhichPart[q35] = q29 /\ q35 = q33 | q35 : int(1..4)])
                       | q33 : int(1..4)]))
                 | q29 : int(1..4)])
             | q27 : int(1..4)]),
    and([q37 <= x_PartitionOccurrence_NumParts ->
         or([q41 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Marker /\
             (and([x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Values_Occurrence[q41, q42] ->
                   or([x_PartitionOccurrence_WhichPart[q44] = q37 /\ q44 = q42 | q44 : int(1..4)])
                       | q42 : int(1..4)])
              /\
              and([x_PartitionOccurrence_WhichPart[q46] = q37 ->
                   x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Values_Occurrence[q41, q46]
                       | q46 : int(1..4)]))
                 | q41 : int(1..4)])
             | q37 : int(1..4)]),
    alldifferent_except([toInt(q121 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Marker /\
                               x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q121, q122]
                               != 5)
                         *
                         catchUndef(x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy
                                        [q121, q122],
                                    0)
                             | q121 : int(1..4), q122 : int(1..4)],
                        0),
    and([q123 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Marker /\
         q124 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Marker
         ->
         sum([toInt(x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q123, q126] != 5)
                  | q126 : int(1..4)])
         =
         sum([toInt(x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q124, q128] != 5)
                  | q128 : int(1..4)])
             | q123 : int(1..4), q124 : int(1..4)]),
    and([q129 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Marker ->
         sum([toInt(x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q129, q131] != 5)
                  | q131 : int(1..4)])
         >= 1
             | q129 : int(1..4)]),
    and([q52 + 1 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Marker ->
         x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q52, ..] <lex
         x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q52 + 1, ..]
             | q52 : int(1..3)]),
    and([q53 > x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Marker ->
         and([x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q53, q113] = 1
                  | q113 : int(1..4)])
             | q53 : int(1..4)]),
    x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Marker <= 4,
    and([q54 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Marker ->
         and([x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q54, q55] <
              x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q54, q55 + 1]
              \/ x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q54, q55] = 5
                  | q55 : int(1..3)])
             | q54 : int(1..4)]),
    and([q54 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Marker ->
         and([x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q54, q56] = 5 ->
              x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q54, q56 + 1] = 5
                  | q56 : int(1..3)])
             | q54 : int(1..4)]),
    and([q54 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Marker ->
         sum([toInt(x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q54, q57] != 5)
                  | q57 : int(1..4)])
         <= 4
             | q54 : int(1..4)]),
    4 =
    sum([toInt(q60 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Marker) *
         catchUndef(sum([toInt(x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q60, q62] !=
                               5)
                             | q62 : int(1..4)]),
                    0)
             | q60 : int(1..4)]),
    and([q65 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Marker ->
         or([q67 <= x_PartitionOccurrence_NumParts /\
             (and([x_PartitionOccurrence_WhichPart[q70] = q67 ->
                   or([x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q65, q72] != 5 /\
                       x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q65, q72] = q70
                           | q72 : int(1..4)])
                       | q70 : int(1..4)])
              /\
              and([x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q65, q74] != 5 ->
                   or([x_PartitionOccurrence_WhichPart[q76] = q67 /\
                       q76 = x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q65, q74]
                           | q76 : int(1..4)])
                       | q74 : int(1..4)]))
                 | q67 : int(1..4)])
             | q65 : int(1..4)]),
    and([q78 <= x_PartitionOccurrence_NumParts ->
         or([q82 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Marker /\
             (and([x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q82, q84] != 5 ->
                   or([x_PartitionOccurrence_WhichPart[q86] = q78 /\
                       q86 = x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q82, q84]
                           | q86 : int(1..4)])
                       | q84 : int(1..4)])
              /\
              and([x_PartitionOccurrence_WhichPart[q88] = q78 ->
                   or([x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q82, q90] != 5 /\
                       x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q82, q90] = q88
                           | q90 : int(1..4)])
                       | q88 : int(1..4)]))
                 | q82 : int(1..4)])
             | q78 : int(1..4)]),
    and([q93 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Marker ->
         or([q96 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Marker /\
             (and([x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Values_Occurrence[q96, q97] ->
                   or([x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q93, q99] != 5 /\
                       x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q93, q99] = q97
                           | q99 : int(1..4)])
                       | q97 : int(1..4)])
              /\
              and([x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q93, q101] != 5 ->
                   x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Values_Occurrence
                       [q96, x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q93, q101]]
                       | q101 : int(1..4)]))
                 | q96 : int(1..4)])
             | q93 : int(1..4)]),
    and([q104 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Marker ->
         or([q107 <= x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Marker /\
             (and([x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q107, q109] != 5 ->
                   x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Values_Occurrence
                       [q104, x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q107, q109]]
                       | q109 : int(1..4)])
              /\
              and([x_PartitionAsSet_ExplicitVarSizeWithMarkerR2_Values_Occurrence[q104, q110] ->
                   or([x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q107, q112] != 5 /\
                       x_PartitionAsSet_ExplicitVarSizeWithMarkerR6_Values_ExplicitVarSizeWithDummy[q107, q112] = q110
                           | q112 : int(1..4)])
                       | q110 : int(1..4)]))
                 | q107 : int(1..4)])
             | q104 : int(1..4)])

